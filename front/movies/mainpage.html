<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POPCORNGEEK</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <h1>POPCORNGEEK</h1>

    <h2>박스오피스 순위</h2>
    <ul id="boxoffice-movies-list"></ul>

    <h2>Graded Movies</h2>
    <ul id="graded-movies-list"></ul>

    <h2>Liked Movies</h2>
    <ul id="liked-movies-list"></ul>

    <script>
        axios.get('http://127.0.0.1:8000/api/v1/movies/')
          .then(response => {
              // 박스오피스 영화 데이터 처리
              const boxofficeMovies = response.data.boxoffice_movies;
              const boxofficeList = document.getElementById('boxoffice-movies-list');
              boxofficeMovies.forEach(movie => {
                  const li = document.createElement('li');
                  li.textContent = `Title: ${movie.title}, Rank: ${movie.rank}`;
                  boxofficeList.appendChild(li);
              });

              // 평점 영화 데이터 처리
              const gradedMovies = response.data.graded_movies;
              const gradedList = document.getElementById('graded-movies-list');
              gradedMovies.forEach(movie => {
                  const li = document.createElement('li');
                  li.textContent = `Title: ${movie.title}, Average Grade: ${movie.average_grade || 0}`;
                  gradedList.appendChild(li);
              });

              // 좋아요 영화 데이터 처리
              const likedMovies = response.data.liked_movies;
              const likedList = document.getElementById('liked-movies-list');
              likedMovies.forEach(movie => {
                  const li = document.createElement('li');
                  li.textContent = `Title: ${movie.title}, Likes: ${movie.like}`;
                  likedList.appendChild(li);
              });
          })
          .catch(error => {
              console.error('Error fetching movies:', error);
          });
    </script>
</body>
</html>
